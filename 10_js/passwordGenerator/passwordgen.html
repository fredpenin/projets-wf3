<!-- Créer un password generator :
- le user peut choisir le nb de charactères de son mdp
-         a le choix d'ajouter des majuscules
-         a le choix d'ajouter les caractères numériques
-                              les caractères spéciaux
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Password Generator</title>
</head>
<body>
    <h3>Générateur de mot de passe</h3>


    <form>
        <div>
            <label for="pwdSize">Longueur du mot de passe ;</label>
            <input type="number" id="pwdSize" />
        </div>
        <div>
            <input type="checkbox" id="uppercase" />
            <label for="uppercase">Majuscules</label>
        </div>
        <div>
            <input type="checkbox" id="numeric" />
            <label for="numeric">Nombres</label>
        </div>
        <div>
            <input type="checkbox" id="special" />
            <label for="special">Spéciaux</label>
        </div>
        <hr>
        <button type="button" id="generateBtn">Générer</button>
    </form>

    <div id="password"></div>

    <script>
        function randomString(pwdSize, uppercase, numeric, special)
        {
            var defaultSize = 10;

            pwdSize = Number(pwdSize) || defaultSize; //si pwdSize est undefined, il prendra 10
            
            if(typeof(pwdSize) != "number")
            {
                pwdSize = defaultSize;
            }

            uppercase = typeof(uppercase) =="boolean" ? uppercase : false;
            numeric = typeof(numeric) =="boolean" ? numeric : false;
            specials = typeof(specials) =="boolean" ? specials : false;

            /*var pwdSize = 32,
            uppercase = false, 
            numeric = false, 
            specials = false;*/

            var output = "";

            //chaine de base
            var chars = "abcdefghijklmnopqrstuvwxyz";
            //ajout des majuscules à la chaine de base
            if(uppercase){
                chars += chars.toUpperCase();
            }
            //ajout des chiffres à la chaine de base
            if(numeric){
                chars += "0123456789";
            }
            //ajout des caractères spéciaux à la chaine de base
            if(specials){
                chars += "&*(-_@~#{[|^]}";
            }
            
            // Nb de caractères de Chars
            var n = chars.length;
            

            for (let i=0; i<pwdSize; i++)
            {
                output += chars.charAt(Math.floor(Math.random() * n));
            }
            return output;
        }
        
        //console.log(randomString(pwdSize, uppercase, numeric, special));
        
        //detection du clic sur le bouton Générer
        document.getElementById("generateBtn").onclick = function() {

            var pwdSize = document.getElementById("pwdSize").value;
            var uppercase = document.getElementById("uppercase").checked;
            var numeric = document.getElementById("numeric").checked;
            var special = document.getElementById("special").checked;

            //on génère le mdp
            var password = randomString(pwdSize, uppercase, numeric, special);                   

            //alert(randomString(pwdSize, uppercase, numeric, special));

            //affichage du mdp
            document.getElementById("password").innerHTML = password;
            
        }
        
        

        //console.log(window.maVariable);

        //console.log(n);
        // entier aléatoire compris entre 1 et n (nb total de la chaine de caractères)
        //console.log(Math.floor(Math.random() * n) + 1);
        //var intRand = Math.floor(Math.random() * n) + 1;
        //console.log(chars.charAt(intRand));


        // typeof(); // retourne le type de donnée
        //console.log (Math.random()); //float aléatoire entre 0 et 1
        //aléatoire entre 1 et 10 //console.log((Math.random() * 10) + 1 );
        //Entier aléatoire entre 1 et 10 //console.log (Math.floor(Math.random() * 10) + 1 );
        
    </script>
</body>
</html>